{"ast":null,"code":"var _jsxFileName = \"F:\\\\DACN\\\\do-an\\\\Frontend\\\\src\\\\pages\\\\SetupPage\\\\SetupPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { updateUser } from '../../redux/Reducer/userSlice';\nimport { Container, Paper, Typography, TextField, Button, FormControlLabel, Checkbox, Grid } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst foodOptions = ['Vegetarian', 'Sweet', 'Coffee', 'Japanese', 'Korean'];\nconst foodtype = [\"Pizza\", \"Sushi\", \"Burger\", \"BBQ\", \"Vegan\"];\nfunction SetupPage() {\n  _s();\n  const user = useSelector(state => state.user.user);\n  console.log(\"user:\", user);\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const [address, setAddress] = useState(user.address || '');\n  const [preferences, setPreferences] = useState(user.preferences || []);\n  const [error, setError] = useState(false);\n  const [foodTypes, setFoodTypes] = useState(user.foodTypes || []);\n  const handlePreferenceChange = event => {\n    const {\n      value,\n      checked\n    } = event.target;\n    if (checked) {\n      setPreferences([...preferences, value]);\n    } else {\n      setPreferences(preferences.filter(p => p !== value));\n    }\n  };\n  const handleFoodTypesChange = event => {\n    const {\n      value,\n      checked\n    } = event.target;\n    if (checked) {\n      setFoodTypes([...foodTypes, value]);\n    } else {\n      setPreferences(foodTypes.filter(p => p !== value));\n    }\n  };\n  const handleSubmit = async () => {\n    if (!address) {\n      setError(true);\n      return;\n    }\n    setError(false);\n    const updatedUser = {\n      ...user,\n      address,\n      preferences\n    };\n    dispatch(updateUser(updatedUser));\n    try {\n      const token = localStorage.getItem(\"token\");\n      console.log(\"Token từ localStorage:\", token);\n      await fetch(\"http://localhost:5000/api/user/update-user\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          address,\n          preferences // Cập nhật danh sách preferences\n        })\n      });\n      navigate('/recommendations');\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"sm\",\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 3,\n      sx: {\n        padding: '20px',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        sx: {\n          mb: 3,\n          color: '#333'\n        },\n        children: \"Ho\\xE0n Th\\xE0nh H\\u1ED3 S\\u01A1 C\\u1EE7a B\\u1EA1n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        label: \"\\u0110\\u1ECBa ch\\u1EC9\",\n        value: address,\n        error: error && !address,\n        helperText: error && !address ? 'Vui lòng nhập địa chỉ' : '',\n        fullWidth: true,\n        margin: \"normal\",\n        variant: \"outlined\",\n        sx: {\n          mb: 3\n        },\n        onChange: e => setAddress(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        sx: {\n          mt: 3,\n          mb: 2,\n          color: '#666'\n        },\n        children: \"S\\u1EDF Th\\xEDch \\u0102n U\\u1ED1ng\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 2,\n        sx: {\n          width: '100%'\n        },\n        children: foodOptions.map(option => /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 6,\n          children: /*#__PURE__*/_jsxDEV(FormControlLabel, {\n            control: /*#__PURE__*/_jsxDEV(Checkbox, {\n              checked: preferences.includes(option),\n              value: option,\n              color: \"primary\",\n              sx: {\n                mt: 1\n              },\n              onChange: handlePreferenceChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 28\n            }, this),\n            label: option,\n            labelPlacement: \"end\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 17\n          }, this)\n        }, option, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        fullWidth: true,\n        sx: {\n          mt: 3,\n          backgroundColor: '#0095f6',\n          '&:hover': {\n            backgroundColor: '#0077c0'\n          }\n        },\n        onClick: handleSubmit,\n        children: \"L\\u01B0u v\\xE0 Ti\\u1EBFp T\\u1EE5c\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 7\n  }, this);\n}\n_s(SetupPage, \"6aJDyNQ28jrbCACu6mGh56yiC3g=\", false, function () {\n  return [useSelector, useDispatch, useNavigate];\n});\n_c = SetupPage;\nexport default SetupPage;\nvar _c;\n$RefreshReg$(_c, \"SetupPage\");","map":{"version":3,"names":["React","useState","useNavigate","useSelector","useDispatch","updateUser","Container","Paper","Typography","TextField","Button","FormControlLabel","Checkbox","Grid","jsxDEV","_jsxDEV","foodOptions","foodtype","SetupPage","_s","user","state","console","log","dispatch","navigate","address","setAddress","preferences","setPreferences","error","setError","foodTypes","setFoodTypes","handlePreferenceChange","event","value","checked","target","filter","p","handleFoodTypesChange","handleSubmit","updatedUser","token","localStorage","getItem","fetch","method","headers","Authorization","body","JSON","stringify","maxWidth","children","elevation","sx","padding","display","flexDirection","alignItems","variant","mb","color","fileName","_jsxFileName","lineNumber","columnNumber","label","helperText","fullWidth","margin","onChange","e","mt","container","spacing","width","map","option","item","xs","control","includes","labelPlacement","backgroundColor","onClick","_c","$RefreshReg$"],"sources":["F:/DACN/do-an/Frontend/src/pages/SetupPage/SetupPage.js"],"sourcesContent":["  import React, { useState } from 'react';\r\n  import { useNavigate } from 'react-router-dom';\r\n  import { useSelector, useDispatch } from 'react-redux';\r\n  import { updateUser } from '../../redux/Reducer/userSlice';\r\n  import { \r\n    Container, \r\n    Paper, \r\n    Typography, \r\n    TextField, \r\n    Button, \r\n    FormControlLabel, \r\n    Checkbox, \r\n    Grid \r\n  } from '@mui/material';\r\n\r\n  const foodOptions = ['Vegetarian', 'Sweet', 'Coffee', 'Japanese', 'Korean'];\r\n  const foodtype = [\"Pizza\", \"Sushi\", \"Burger\", \"BBQ\", \"Vegan\"];\r\n  function SetupPage() {\r\n   \r\n    const user = useSelector((state) => state.user.user);\r\n    console.log(\"user:\", user)\r\n    const dispatch = useDispatch();\r\n    const navigate = useNavigate();\r\n\r\n    const [address, setAddress] = useState(user.address || '');\r\n    const [preferences, setPreferences] = useState(user.preferences || []);\r\n    const [error, setError] = useState(false);\r\n    const [foodTypes, setFoodTypes] = useState(user.foodTypes || []);\r\n    const handlePreferenceChange = (event) => {\r\n      const { value, checked } = event.target;\r\n      if (checked) {\r\n        setPreferences([...preferences, value]);\r\n      } else {\r\n        setPreferences(preferences.filter((p) => p !== value));\r\n      }\r\n    };\r\n    const handleFoodTypesChange = (event) => {\r\n      const { value, checked } = event.target;\r\n      if (checked) {\r\n        setFoodTypes([...foodTypes, value]);\r\n      } else {\r\n        setPreferences(foodTypes.filter((p) => p !== value));\r\n      }\r\n    };\r\n    const handleSubmit = async () => {\r\n      if (!address) {\r\n        setError(true);\r\n        return;\r\n      }\r\n      setError(false);\r\n      const updatedUser = { ...user, address, preferences };\r\n      dispatch(updateUser(updatedUser));\r\n\r\n      try {\r\n        const token = localStorage.getItem(\"token\");\r\n        console.log(\"Token từ localStorage:\", token);\r\n        await fetch(\"http://localhost:5000/api/user/update-user\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n          body: JSON.stringify({\r\n            address,\r\n            preferences// Cập nhật danh sách preferences\r\n          }),\r\n        })\r\n        navigate('/recommendations');\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    };\r\n\r\n    return (\r\n      <Container maxWidth=\"sm\">\r\n        <Paper elevation={3} sx={{ padding: '20px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n          <Typography variant=\"h4\" sx={{ mb: 3, color: '#333' }}>Hoàn Thành Hồ Sơ Của Bạn</Typography>\r\n          <TextField\r\n            label=\"Địa chỉ\"\r\n            value={address}\r\n            error={error && !address}\r\n            helperText={error && !address ? 'Vui lòng nhập địa chỉ' : ''}\r\n            fullWidth\r\n            margin=\"normal\"\r\n            variant=\"outlined\"\r\n            sx={{ mb: 3 }}\r\n            onChange={(e) => setAddress(e.target.value)}\r\n          />\r\n          <Typography variant=\"h6\" sx={{ mt: 3, mb: 2, color: '#666' }}>Sở Thích Ăn Uống</Typography>\r\n          <Grid container spacing={2} sx={{ width: '100%' }}>\r\n            {foodOptions.map((option) => (\r\n              <Grid item xs={6} key={option}>\r\n                <FormControlLabel\r\n                  control={<Checkbox checked={preferences.includes(option)} value={option} color=\"primary\" sx={{ mt: 1 }} onChange={handlePreferenceChange} />}\r\n                  label={option}\r\n                  labelPlacement=\"end\"\r\n                />\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n          <Button variant=\"contained\" color=\"primary\" fullWidth sx={{ mt: 3, backgroundColor: '#0095f6', '&:hover': { backgroundColor: '#0077c0' } }} onClick={handleSubmit}>\r\n            Lưu và Tiếp Tục\r\n          </Button>\r\n        </Paper>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  export default SetupPage;"],"mappings":";;AAAE,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,UAAU,QAAQ,+BAA+B;AAC1D,SACEC,SAAS,EACTC,KAAK,EACLC,UAAU,EACVC,SAAS,EACTC,MAAM,EACNC,gBAAgB,EAChBC,QAAQ,EACRC,IAAI,QACC,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvB,MAAMC,WAAW,GAAG,CAAC,YAAY,EAAE,OAAO,EAAE,QAAQ,EAAE,UAAU,EAAE,QAAQ,CAAC;AAC3E,MAAMC,QAAQ,GAAG,CAAC,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,KAAK,EAAE,OAAO,CAAC;AAC7D,SAASC,SAASA,CAAA,EAAG;EAAAC,EAAA;EAEnB,MAAMC,IAAI,GAAGjB,WAAW,CAAEkB,KAAK,IAAKA,KAAK,CAACD,IAAI,CAACA,IAAI,CAAC;EACpDE,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEH,IAAI,CAAC;EAC1B,MAAMI,QAAQ,GAAGpB,WAAW,CAAC,CAAC;EAC9B,MAAMqB,QAAQ,GAAGvB,WAAW,CAAC,CAAC;EAE9B,MAAM,CAACwB,OAAO,EAAEC,UAAU,CAAC,GAAG1B,QAAQ,CAACmB,IAAI,CAACM,OAAO,IAAI,EAAE,CAAC;EAC1D,MAAM,CAACE,WAAW,EAAEC,cAAc,CAAC,GAAG5B,QAAQ,CAACmB,IAAI,CAACQ,WAAW,IAAI,EAAE,CAAC;EACtE,MAAM,CAACE,KAAK,EAAEC,QAAQ,CAAC,GAAG9B,QAAQ,CAAC,KAAK,CAAC;EACzC,MAAM,CAAC+B,SAAS,EAAEC,YAAY,CAAC,GAAGhC,QAAQ,CAACmB,IAAI,CAACY,SAAS,IAAI,EAAE,CAAC;EAChE,MAAME,sBAAsB,GAAIC,KAAK,IAAK;IACxC,MAAM;MAAEC,KAAK;MAAEC;IAAQ,CAAC,GAAGF,KAAK,CAACG,MAAM;IACvC,IAAID,OAAO,EAAE;MACXR,cAAc,CAAC,CAAC,GAAGD,WAAW,EAAEQ,KAAK,CAAC,CAAC;IACzC,CAAC,MAAM;MACLP,cAAc,CAACD,WAAW,CAACW,MAAM,CAAEC,CAAC,IAAKA,CAAC,KAAKJ,KAAK,CAAC,CAAC;IACxD;EACF,CAAC;EACD,MAAMK,qBAAqB,GAAIN,KAAK,IAAK;IACvC,MAAM;MAAEC,KAAK;MAAEC;IAAQ,CAAC,GAAGF,KAAK,CAACG,MAAM;IACvC,IAAID,OAAO,EAAE;MACXJ,YAAY,CAAC,CAAC,GAAGD,SAAS,EAAEI,KAAK,CAAC,CAAC;IACrC,CAAC,MAAM;MACLP,cAAc,CAACG,SAAS,CAACO,MAAM,CAAEC,CAAC,IAAKA,CAAC,KAAKJ,KAAK,CAAC,CAAC;IACtD;EACF,CAAC;EACD,MAAMM,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI,CAAChB,OAAO,EAAE;MACZK,QAAQ,CAAC,IAAI,CAAC;MACd;IACF;IACAA,QAAQ,CAAC,KAAK,CAAC;IACf,MAAMY,WAAW,GAAG;MAAE,GAAGvB,IAAI;MAAEM,OAAO;MAAEE;IAAY,CAAC;IACrDJ,QAAQ,CAACnB,UAAU,CAACsC,WAAW,CAAC,CAAC;IAEjC,IAAI;MACF,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3CxB,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEqB,KAAK,CAAC;MAC5C,MAAMG,KAAK,CAAC,4CAA4C,EAAE;QACxDC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,cAAc,EAAE,kBAAkB;UAClCC,aAAa,EAAE,UAAUN,KAAK;QAChC,CAAC;QACDO,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACnB3B,OAAO;UACPE,WAAW;QACb,CAAC;MACH,CAAC,CAAC;MACFH,QAAQ,CAAC,kBAAkB,CAAC;IAC9B,CAAC,CAAC,OAAOK,KAAK,EAAE;MACdR,OAAO,CAACQ,KAAK,CAACA,KAAK,CAAC;IACtB;EACF,CAAC;EAED,oBACEf,OAAA,CAACT,SAAS;IAACgD,QAAQ,EAAC,IAAI;IAAAC,QAAA,eACtBxC,OAAA,CAACR,KAAK;MAACiD,SAAS,EAAE,CAAE;MAACC,EAAE,EAAE;QAAEC,OAAO,EAAE,MAAM;QAAEC,OAAO,EAAE,MAAM;QAAEC,aAAa,EAAE,QAAQ;QAAEC,UAAU,EAAE;MAAS,CAAE;MAAAN,QAAA,gBAC3GxC,OAAA,CAACP,UAAU;QAACsD,OAAO,EAAC,IAAI;QAACL,EAAE,EAAE;UAAEM,EAAE,EAAE,CAAC;UAAEC,KAAK,EAAE;QAAO,CAAE;QAAAT,QAAA,EAAC;MAAwB;QAAAU,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAY,CAAC,eAC5FrD,OAAA,CAACN,SAAS;QACR4D,KAAK,EAAC,wBAAS;QACfjC,KAAK,EAAEV,OAAQ;QACfI,KAAK,EAAEA,KAAK,IAAI,CAACJ,OAAQ;QACzB4C,UAAU,EAAExC,KAAK,IAAI,CAACJ,OAAO,GAAG,uBAAuB,GAAG,EAAG;QAC7D6C,SAAS;QACTC,MAAM,EAAC,QAAQ;QACfV,OAAO,EAAC,UAAU;QAClBL,EAAE,EAAE;UAAEM,EAAE,EAAE;QAAE,CAAE;QACdU,QAAQ,EAAGC,CAAC,IAAK/C,UAAU,CAAC+C,CAAC,CAACpC,MAAM,CAACF,KAAK;MAAE;QAAA6B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC7C,CAAC,eACFrD,OAAA,CAACP,UAAU;QAACsD,OAAO,EAAC,IAAI;QAACL,EAAE,EAAE;UAAEkB,EAAE,EAAE,CAAC;UAAEZ,EAAE,EAAE,CAAC;UAAEC,KAAK,EAAE;QAAO,CAAE;QAAAT,QAAA,EAAC;MAAgB;QAAAU,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAY,CAAC,eAC3FrD,OAAA,CAACF,IAAI;QAAC+D,SAAS;QAACC,OAAO,EAAE,CAAE;QAACpB,EAAE,EAAE;UAAEqB,KAAK,EAAE;QAAO,CAAE;QAAAvB,QAAA,EAC/CvC,WAAW,CAAC+D,GAAG,CAAEC,MAAM,iBACtBjE,OAAA,CAACF,IAAI;UAACoE,IAAI;UAACC,EAAE,EAAE,CAAE;UAAA3B,QAAA,eACfxC,OAAA,CAACJ,gBAAgB;YACfwE,OAAO,eAAEpE,OAAA,CAACH,QAAQ;cAACyB,OAAO,EAAET,WAAW,CAACwD,QAAQ,CAACJ,MAAM,CAAE;cAAC5C,KAAK,EAAE4C,MAAO;cAAChB,KAAK,EAAC,SAAS;cAACP,EAAE,EAAE;gBAAEkB,EAAE,EAAE;cAAE,CAAE;cAACF,QAAQ,EAAEvC;YAAuB;cAAA+B,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAE;YAC7IC,KAAK,EAAEW,MAAO;YACdK,cAAc,EAAC;UAAK;YAAApB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACrB;QAAC,GALmBY,MAAM;UAAAf,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAMvB,CACP;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,eACPrD,OAAA,CAACL,MAAM;QAACoD,OAAO,EAAC,WAAW;QAACE,KAAK,EAAC,SAAS;QAACO,SAAS;QAACd,EAAE,EAAE;UAAEkB,EAAE,EAAE,CAAC;UAAEW,eAAe,EAAE,SAAS;UAAE,SAAS,EAAE;YAAEA,eAAe,EAAE;UAAU;QAAE,CAAE;QAACC,OAAO,EAAE7C,YAAa;QAAAa,QAAA,EAAC;MAEnK;QAAAU,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEhB;AAACjD,EAAA,CAzFQD,SAAS;EAAA,QAEHf,WAAW,EAEPC,WAAW,EACXF,WAAW;AAAA;AAAAsF,EAAA,GALrBtE,SAAS;AA2FlB,eAAeA,SAAS;AAAC,IAAAsE,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}