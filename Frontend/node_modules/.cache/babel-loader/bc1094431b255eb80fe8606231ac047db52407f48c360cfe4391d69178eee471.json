{"ast":null,"code":"export const getRecommendations = async user => {\n  const {\n    address,\n    preferences\n  } = user;\n  const allRestaurants = await fetch('http://localhost:5000/api/user/restaurants').then(res => res.json());\n  console.log(\"recommend res:\", allRestaurants);\n  const allNormalUsers = await fetch('http://localhost:5000/api/user/normal-users').then(res => res.json());\n  console.log(\"recommend normal:\", allNormalUsers);\n  console.log(\"length:\", preferences.length);\n  let filteredRestaurants = allRestaurants.filter(restaurant => preferences.some(pref => restaurant.foodTypes.includes(pref)));\n\n  // Lọc người dùng có sở thích chung\n  let filteredNormalUsers = allNormalUsers.filter(normalUser => preferences.some(pref => normalUser.preferences.includes(pref)));\n\n  // Nếu không có sở thích chung, chọn ngẫu nhiên\n  if (filteredRestaurants.length === 0) {\n    filteredRestaurants = allRestaurants.sort(() => Math.random() - 0.5).slice(0, 5);\n  } else {\n    filteredRestaurants = filteredRestaurants.sort((a, b) => b.rating - a.rating).slice(0, 5);\n  }\n  if (filteredNormalUsers.length === 0) {\n    filteredNormalUsers = allNormalUsers.sort(() => Math.random() - 0.5).slice(0, 5);\n  } else {\n    filteredNormalUsers = filteredNormalUsers.sort((a, b) => b.points - a.points).slice(0, 5);\n  }\n  return {\n    restaurants: filteredRestaurants,\n    normalUsers: filteredNormalUsers\n  };\n};","map":{"version":3,"names":["getRecommendations","user","address","preferences","allRestaurants","fetch","then","res","json","console","log","allNormalUsers","length","filteredRestaurants","filter","restaurant","some","pref","foodTypes","includes","filteredNormalUsers","normalUser","sort","Math","random","slice","a","b","rating","points","restaurants","normalUsers"],"sources":["F:/DACN/do-an/Frontend/src/utils/recommendations.js"],"sourcesContent":["export const getRecommendations = async (user) => {\r\n  const { address, preferences } = user;\r\n  const allRestaurants = await fetch('http://localhost:5000/api/user/restaurants').then(res => res.json());\r\n  console.log(\"recommend res:\", allRestaurants)\r\n  const allNormalUsers = await fetch('http://localhost:5000/api/user/normal-users').then(res => res.json());\r\n  console.log(\"recommend normal:\", allNormalUsers)\r\n  console.log(\"length:\", preferences.length)\r\n  let filteredRestaurants = allRestaurants.filter(restaurant =>\r\n    preferences.some(pref => restaurant.foodTypes.includes(pref))\r\n);\r\n\r\n// Lọc người dùng có sở thích chung\r\nlet filteredNormalUsers = allNormalUsers.filter(normalUser =>\r\n    preferences.some(pref => normalUser.preferences.includes(pref))\r\n);\r\n\r\n// Nếu không có sở thích chung, chọn ngẫu nhiên\r\nif (filteredRestaurants.length === 0) {\r\n    filteredRestaurants = allRestaurants.sort(() => Math.random() - 0.5).slice(0, 5);\r\n} else {\r\n    filteredRestaurants = filteredRestaurants.sort((a, b) => b.rating - a.rating).slice(0, 5);\r\n}\r\n\r\nif (filteredNormalUsers.length === 0) {\r\n    filteredNormalUsers = allNormalUsers.sort(() => Math.random() - 0.5).slice(0, 5);\r\n} else {\r\n    filteredNormalUsers = filteredNormalUsers.sort((a, b) => b.points - a.points).slice(0, 5);\r\n}\r\n\r\nreturn { restaurants: filteredRestaurants, normalUsers: filteredNormalUsers };\r\n};\r\n"],"mappings":"AAAA,OAAO,MAAMA,kBAAkB,GAAG,MAAOC,IAAI,IAAK;EAChD,MAAM;IAAEC,OAAO;IAAEC;EAAY,CAAC,GAAGF,IAAI;EACrC,MAAMG,cAAc,GAAG,MAAMC,KAAK,CAAC,4CAA4C,CAAC,CAACC,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC;EACxGC,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEN,cAAc,CAAC;EAC7C,MAAMO,cAAc,GAAG,MAAMN,KAAK,CAAC,6CAA6C,CAAC,CAACC,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC;EACzGC,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEC,cAAc,CAAC;EAChDF,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEP,WAAW,CAACS,MAAM,CAAC;EAC1C,IAAIC,mBAAmB,GAAGT,cAAc,CAACU,MAAM,CAACC,UAAU,IACxDZ,WAAW,CAACa,IAAI,CAACC,IAAI,IAAIF,UAAU,CAACG,SAAS,CAACC,QAAQ,CAACF,IAAI,CAAC,CAChE,CAAC;;EAED;EACA,IAAIG,mBAAmB,GAAGT,cAAc,CAACG,MAAM,CAACO,UAAU,IACtDlB,WAAW,CAACa,IAAI,CAACC,IAAI,IAAII,UAAU,CAAClB,WAAW,CAACgB,QAAQ,CAACF,IAAI,CAAC,CAClE,CAAC;;EAED;EACA,IAAIJ,mBAAmB,CAACD,MAAM,KAAK,CAAC,EAAE;IAClCC,mBAAmB,GAAGT,cAAc,CAACkB,IAAI,CAAC,MAAMC,IAAI,CAACC,MAAM,CAAC,CAAC,GAAG,GAAG,CAAC,CAACC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;EACpF,CAAC,MAAM;IACHZ,mBAAmB,GAAGA,mBAAmB,CAACS,IAAI,CAAC,CAACI,CAAC,EAAEC,CAAC,KAAKA,CAAC,CAACC,MAAM,GAAGF,CAAC,CAACE,MAAM,CAAC,CAACH,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;EAC7F;EAEA,IAAIL,mBAAmB,CAACR,MAAM,KAAK,CAAC,EAAE;IAClCQ,mBAAmB,GAAGT,cAAc,CAACW,IAAI,CAAC,MAAMC,IAAI,CAACC,MAAM,CAAC,CAAC,GAAG,GAAG,CAAC,CAACC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;EACpF,CAAC,MAAM;IACHL,mBAAmB,GAAGA,mBAAmB,CAACE,IAAI,CAAC,CAACI,CAAC,EAAEC,CAAC,KAAKA,CAAC,CAACE,MAAM,GAAGH,CAAC,CAACG,MAAM,CAAC,CAACJ,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;EAC7F;EAEA,OAAO;IAAEK,WAAW,EAAEjB,mBAAmB;IAAEkB,WAAW,EAAEX;EAAoB,CAAC;AAC7E,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}