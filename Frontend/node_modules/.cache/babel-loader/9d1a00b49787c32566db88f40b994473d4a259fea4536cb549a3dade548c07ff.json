{"ast":null,"code":"var _jsxFileName = \"F:\\\\DACN\\\\do-an\\\\Frontend\\\\src\\\\pages\\\\SetupPage\\\\SetupPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { updateUser } from '../../redux/Reducer/userSlice';\nimport { Container, Paper, Typography, TextField, Button, FormControlLabel, Checkbox, Grid } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst foodOptions = ['Vegetarian', 'Sweet', 'Coffee', 'Japanese', 'Korean'];\nfunction SetupPage() {\n  _s();\n  const token = localStorage.getItem(\"token\"); // Kiểm tra token\n\n  const user = useSelector(state => state.user.user);\n  console.log(\"token:\", token);\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const [address, setAddress] = useState(user.address || '');\n  const [preferences, setPreferences] = useState(user.preferences || []);\n  const [error, setError] = useState(false);\n  const handlePreferenceChange = event => {\n    const {\n      value,\n      checked\n    } = event.target;\n    if (checked) {\n      setPreferences([...preferences, value]);\n    } else {\n      setPreferences(preferences.filter(p => p !== value));\n    }\n  };\n  const handleSubmit = async () => {\n    if (!address) {\n      setError(true);\n      return;\n    }\n    setError(false);\n    const updatedUser = {\n      ...user,\n      address,\n      preferences\n    };\n    dispatch(updateUser(updatedUser));\n    try {\n      await fetch('/api/auth/update-user', {\n        method: 'POST',\n        body: JSON.stringify(updatedUser),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      navigate('/recommendations');\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"sm\",\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 3,\n      sx: {\n        padding: '20px',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        sx: {\n          mb: 3,\n          color: '#333'\n        },\n        children: \"Ho\\xE0n Th\\xE0nh H\\u1ED3 S\\u01A1 C\\u1EE7a B\\u1EA1n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        label: \"\\u0110\\u1ECBa ch\\u1EC9\",\n        value: address,\n        error: error && !address,\n        helperText: error && !address ? 'Vui lòng nhập địa chỉ' : '',\n        fullWidth: true,\n        margin: \"normal\",\n        variant: \"outlined\",\n        sx: {\n          mb: 3\n        },\n        onChange: e => setAddress(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        sx: {\n          mt: 3,\n          mb: 2,\n          color: '#666'\n        },\n        children: \"S\\u1EDF Th\\xEDch \\u0102n U\\u1ED1ng\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 2,\n        sx: {\n          width: '100%'\n        },\n        children: foodOptions.map(option => /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 6,\n          children: /*#__PURE__*/_jsxDEV(FormControlLabel, {\n            control: /*#__PURE__*/_jsxDEV(Checkbox, {\n              checked: preferences.includes(option),\n              value: option,\n              color: \"primary\",\n              sx: {\n                mt: 1\n              },\n              onChange: handlePreferenceChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 28\n            }, this),\n            label: option,\n            labelPlacement: \"end\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 17\n          }, this)\n        }, option, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        fullWidth: true,\n        sx: {\n          mt: 3,\n          backgroundColor: '#0095f6',\n          '&:hover': {\n            backgroundColor: '#0077c0'\n          }\n        },\n        onClick: handleSubmit,\n        children: \"L\\u01B0u v\\xE0 Ti\\u1EBFp T\\u1EE5c\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 7\n  }, this);\n}\n_s(SetupPage, \"9rpAbiSXIpOypFeKuM2WnBawWqc=\", false, function () {\n  return [useSelector, useDispatch, useNavigate];\n});\n_c = SetupPage;\nexport default SetupPage;\nvar _c;\n$RefreshReg$(_c, \"SetupPage\");","map":{"version":3,"names":["React","useState","useNavigate","useSelector","useDispatch","updateUser","Container","Paper","Typography","TextField","Button","FormControlLabel","Checkbox","Grid","jsxDEV","_jsxDEV","foodOptions","SetupPage","_s","token","localStorage","getItem","user","state","console","log","dispatch","navigate","address","setAddress","preferences","setPreferences","error","setError","handlePreferenceChange","event","value","checked","target","filter","p","handleSubmit","updatedUser","fetch","method","body","JSON","stringify","headers","maxWidth","children","elevation","sx","padding","display","flexDirection","alignItems","variant","mb","color","fileName","_jsxFileName","lineNumber","columnNumber","label","helperText","fullWidth","margin","onChange","e","mt","container","spacing","width","map","option","item","xs","control","includes","labelPlacement","backgroundColor","onClick","_c","$RefreshReg$"],"sources":["F:/DACN/do-an/Frontend/src/pages/SetupPage/SetupPage.js"],"sourcesContent":["  import React, { useState } from 'react';\r\n  import { useNavigate } from 'react-router-dom';\r\n  import { useSelector, useDispatch } from 'react-redux';\r\n  import { updateUser } from '../../redux/Reducer/userSlice';\r\n  import { \r\n    Container, \r\n    Paper, \r\n    Typography, \r\n    TextField, \r\n    Button, \r\n    FormControlLabel, \r\n    Checkbox, \r\n    Grid \r\n  } from '@mui/material';\r\n\r\n  const foodOptions = ['Vegetarian', 'Sweet', 'Coffee', 'Japanese', 'Korean'];\r\n\r\n  function SetupPage() {\r\n    const token = localStorage.getItem(\"token\"); // Kiểm tra token\r\n   \r\n    const user = useSelector((state) => state.user.user);\r\n    console.log(\"token:\", token)\r\n    const dispatch = useDispatch();\r\n    const navigate = useNavigate();\r\n\r\n    const [address, setAddress] = useState(user.address || '');\r\n    const [preferences, setPreferences] = useState(user.preferences || []);\r\n    const [error, setError] = useState(false);\r\n\r\n    const handlePreferenceChange = (event) => {\r\n      const { value, checked } = event.target;\r\n      if (checked) {\r\n        setPreferences([...preferences, value]);\r\n      } else {\r\n        setPreferences(preferences.filter((p) => p !== value));\r\n      }\r\n    };\r\n\r\n    const handleSubmit = async () => {\r\n      if (!address) {\r\n        setError(true);\r\n        return;\r\n      }\r\n      setError(false);\r\n      const updatedUser = { ...user, address, preferences };\r\n      dispatch(updateUser(updatedUser));\r\n\r\n      try {\r\n        await fetch('/api/auth/update-user', {\r\n          method: 'POST',\r\n          body: JSON.stringify(updatedUser),\r\n          headers: { 'Content-Type': 'application/json' },\r\n        });\r\n        navigate('/recommendations');\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    };\r\n\r\n    return (\r\n      <Container maxWidth=\"sm\">\r\n        <Paper elevation={3} sx={{ padding: '20px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n          <Typography variant=\"h4\" sx={{ mb: 3, color: '#333' }}>Hoàn Thành Hồ Sơ Của Bạn</Typography>\r\n          <TextField\r\n            label=\"Địa chỉ\"\r\n            value={address}\r\n            error={error && !address}\r\n            helperText={error && !address ? 'Vui lòng nhập địa chỉ' : ''}\r\n            fullWidth\r\n            margin=\"normal\"\r\n            variant=\"outlined\"\r\n            sx={{ mb: 3 }}\r\n            onChange={(e) => setAddress(e.target.value)}\r\n          />\r\n          <Typography variant=\"h6\" sx={{ mt: 3, mb: 2, color: '#666' }}>Sở Thích Ăn Uống</Typography>\r\n          <Grid container spacing={2} sx={{ width: '100%' }}>\r\n            {foodOptions.map((option) => (\r\n              <Grid item xs={6} key={option}>\r\n                <FormControlLabel\r\n                  control={<Checkbox checked={preferences.includes(option)} value={option} color=\"primary\" sx={{ mt: 1 }} onChange={handlePreferenceChange} />}\r\n                  label={option}\r\n                  labelPlacement=\"end\"\r\n                />\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n          <Button variant=\"contained\" color=\"primary\" fullWidth sx={{ mt: 3, backgroundColor: '#0095f6', '&:hover': { backgroundColor: '#0077c0' } }} onClick={handleSubmit}>\r\n            Lưu và Tiếp Tục\r\n          </Button>\r\n        </Paper>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  export default SetupPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}